
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Anime BK - เล่นวิดีโอ</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Kanit&display=swap');
    body { margin: 0; font-family: 'Kanit', sans-serif; background: #141414; color: #fff; }
    header {
      background-color: #ff3d00;
      padding: 15px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      position: relative;
    }
    .logo {
      font-size: 1.8rem;
      font-weight: bold;
      color: white;
      text-decoration: none;
    }
    nav {
      display: flex;
      gap: 10px;
      flex-wrap: nowrap;
    }
    nav a {
      padding: 6px 12px;
      color: white;
      text-decoration: none;
      font-weight: bold;
      font-size: 1rem;
    }
    nav a:hover { color: #ffccbc; }

    .menu-toggle {
      display: none;
      flex-direction: column;
      cursor: pointer;
    }
    .menu-toggle span {
      width: 25px;
      height: 3px;
      background: white;
      margin: 4px 0;
      border-radius: 2px;
    }

    @media(max-width: 600px) {
      nav {
        display: none;
        flex-direction: column;
        background-color: #ff3d00;
        position: absolute;
        top: 100%;
        right: 0;
        left: 0;
        z-index: 100;
        border-top: 1px solid #fff3;
      }
      nav.active {
        display: flex;
      }
      nav a {
        padding: 12px;
        text-align: center;
        font-size: 1.1rem;
      }
      .menu-toggle {
        display: flex;
      }
    }

    main { max-width: 1000px; margin: 20px auto; padding: 0 15px; }
    .video-title {
      text-align: center;
      font-size: 1.5rem;
      color: #ffa07a;
      margin-bottom: 15px;
    }
    .video-container {
      width: 100%;
      aspect-ratio: 16 / 9;
      background: #000;
      margin-bottom: 30px;
    }
    .video-container iframe,
    .video-container video {
      width: 100%;
      height: 100%;
      border: none;
    }
    h2 {
      text-align: center;
      color: #ff3d00;
      margin: 30px 0 15px;
    }
    .anime-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
    @media(min-width: 768px) {
      .anime-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }
    .anime-card {
      background-color: #1f1f1f;
      border-radius: 8px;
      overflow: hidden;
      color: #fff;
      transition: transform 0.2s;
    }
    .anime-card:hover {
      transform: scale(1.05);
    }
    .anime-card img {
      width: 100%;
      display: block;
    }
    .anime-info {
      padding: 10px;
    }
    .anime-title {
      font-weight: 700;
      margin: 0 0 5px;
      font-size: 1rem;
    }
    .anime-ep {
      font-size: 0.9rem;
      color: #ffa07a;
    }
    footer {
      text-align: center;
      padding: 20px;
      background-color: #1f1f1f;
      color: #ccc;
      font-size: 0.9rem;
      margin-top: 40px;
    }
  </style>
</head>
<body>

<header>
  <a href="index.html" class="logo">Anime BK</a>
  <div class="menu-toggle" id="menuToggle" aria-label="Toggle menu" role="button" tabindex="0">
    <span></span><span></span><span></span>
  </div>
  <nav id="navMenu">
    <a href="index.html">หน้าแรก</a>
    <a href="#">พากย์ไทย</a>
    <a href="#">ซับไทย</a>
    <a href="#">ติดต่อ</a>
  </nav>
</header>

<main>
  <div class="video-title" id="videoTitle">กำลังโหลด...</div>
  <div class="video-container" id="videoContainer">กรุณารอสักครู่</div>

  <h2>อนิเมะแนะนำ</h2>
  <div class="anime-grid" id="recommendedAnime"></div>
</main>

<footer>
  © 2025 Anime BK — ดูอนิเมะออนไลน์ พากย์ไทย ซับไทย ครบทุกแนว
</footer>

<script src="video-data.js"></script>
<script src="anime-data.js"></script>
<script>
  const menuToggle = document.getElementById('menuToggle');
  const navMenu = document.getElementById('navMenu');
  menuToggle.addEventListener('click', () => navMenu.classList.toggle('active'));

  const params = new URLSearchParams(window.location.search);
  const animeTitle = params.get("anime");
  const titleEl = document.getElementById("videoTitle");
  const videoEl = document.getElementById("videoContainer");
  const recEl = document.getElementById("recommendedAnime");

  function renderVideo() {
    if (typeof videoData === "undefined" || !animeTitle) return;
    const match = videoData.find(v => v.title === animeTitle);
    if (!match) {
      titleEl.textContent = "ไม่พบข้อมูล";
      videoEl.innerHTML = "<p style='text-align:center; color:#f66;'>ไม่พบวิดีโอ</p>";
      return;
    }

    titleEl.textContent = match.title;
    if (match.video.includes("drive.google.com")) {
      videoEl.innerHTML = `<iframe src="${match.video}" allowfullscreen></iframe>`;
    } else {
      videoEl.innerHTML = `<video controls autoplay><source src="${match.video}" type="video/mp4">ไม่สามารถเล่นวิดีโอนี้ได้</video>`;
    }
  }

  function showRecommended() {
    if (typeof animeList === "undefined") return;
    const picks = animeList.filter(a => a.title !== animeTitle).sort(() => 0.5 - Math.random()).slice(0, 4);
    picks.forEach(anime => {
      const card = document.createElement("div");
      card.className = "anime-card";
      card.innerHTML = `
        <a href="play.html?anime=${encodeURIComponent(anime.title)}">
          <img src="${anime.img}" alt="${anime.title}" />
          <div class="anime-info">
            <div class="anime-title">${anime.title}</div>
            <div class="anime-ep">${anime.type}</div>
          </div>
        </a>`;
      recEl.appendChild(card);
    });
  }

  document.addEventListener("DOMContentLoaded", () => {
    renderVideo();
    showRecommended();
  });
</script>

</body>
</html>
